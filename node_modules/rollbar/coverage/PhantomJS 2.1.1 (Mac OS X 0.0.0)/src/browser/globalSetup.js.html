<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/browser/globalSetup.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../prettify.css">
    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header low">
    <h1>Code coverage report for <span class="entity">src/browser/globalSetup.js</span></h1>
    <h2>
        Statements: <span class="metric">1.72% <small>(1 / 58)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">0% <small>(0 / 41)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">0% <small>(0 / 9)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">1.82% <small>(1 / 55)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">src/browser/</a> &#187; globalSetup.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">function captureUncaughtExceptions(window, handler) {
  if (!window) { return; }
  var oldOnError;<span class="fstat-no" title="function not covered" ></span>
<span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ></span></span>
  if (typeof handler._rollbarOldOnError === 'function') {
    oldOnError = handler._rollbarOldOnError;
<span class="cstat-no" title="statement not covered" >  } else if (window.onerror &amp;&amp; !window.onerror.belongsToRollbar) {</span>
<span class="cstat-no" title="statement not covered" >    oldOnError = window.onerror;</span>
    handl<span class="cstat-no" title="statement not covered" >er._rollbarOldOnError = oldOnError;</span>
  }<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" ></span>
  var fn = function() {
    var args = Array.prototype.slice.call(arguments, 0);
    _rollba<span class="cstat-no" title="statement not covered" >rWindowOnEr<span class="fstat-no" title="function not covered" >ror(window, handler, oldOnError, args);</span></span>
  };<span class="cstat-no" title="statement not covered" ></span>
  fn<span class="cstat-no" title="statement not covered" >.belongsToRollbar = true;</span>
  window.onerror = fn;
}<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" ></span>
function _rollbarWindowOnError(window, r, old, args) {
  if (window._rollbarWrappedError) {
    if (!args[4]) {<span class="fstat-no" title="function not covered" ></span>
<span class="cstat-no" title="statement not covered" >      args[4] = window._rollbarWrappedError;</span>
<span class="cstat-no" title="statement not covered" >    }</span>
    if<span class="cstat-no" title="statement not covered" > (!args[5]) {</span>
      args[5] = window._rollbarWrappedError._rollbarContext;
<span class="cstat-no" title="statement not covered" >    }</span>
    wi<span class="cstat-no" title="statement not covered" >ndow._rollbarWrappedError = null;</span>
  }
<span class="cstat-no" title="statement not covered" ></span>
  r.handleUncaughtException.apply(r, args);
  if (old) {
<span class="cstat-no" title="statement not covered" >    old.apply(window, args);</span>
<span class="cstat-no" title="statement not covered" >  }</span>
}<span class="cstat-no" title="statement not covered" ></span>
&nbsp;
function captureUnhandledRejections(window, handler) {
  if (!window) { return; }
<span class="fstat-no" title="function not covered" ></span>
<span class="cstat-no" title="statement not covered" >  if (typeof wind<span class="cstat-no" title="statement not covered" >ow._roll</span>ba</span>rURH === 'function') {
    window.removeEventListner('unhandledrejection', window._rollbarURH);
<span class="cstat-no" title="statement not covered" >  }</span>
<span class="cstat-no" title="statement not covered" ></span>
  var rejectionHandler = function (event) {
    var reason = event.reason;
    var promise = event.p<span class="cstat-no" title="statement not covered" >romise;<span class="fstat-no" title="function not covered" ></span></span>
    var detail = <span class="cstat-no" title="statement not covered" >event.detail;</span>
<span class="cstat-no" title="statement not covered" ></span>
    if (!reason &amp;<span class="cstat-no" title="statement not covered" >&amp; detail) {</span>
      reason = detail.reason;
<span class="cstat-no" title="statement not covered" >      promise = detail.promise;</span>
    }<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" ></span>
    handler.handleUnhandledRejection(reason, promise);
  };
  wi<span class="cstat-no" title="statement not covered" >ndow._rollbarURH = rejectionHandler;</span>
  window.addEventListener('unhandledrejection', rejectionHandler);
}<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" ></span>
function wrapGlobals(window, handler) {
  if (!window) { return; }
  // Adapted from https://github.com/b<span class="fstat-no" title="function not covered" >ugsnag/bugsnag-js</span>
<span class="cstat-no" title="statement not covered" >  var globals = '<span class="cstat-no" title="statement not covered" >EventTar</span>ge</span>t,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload'.split(',');
  var i, global;
  for (i = 0; i <span class="cstat-no" title="statement not covered" >&lt; globals.length; ++i) {</span>
    global = globals[i];
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >    if (window[global] &amp;&amp;</span> window[global].prototype) {
      _extendListenerPrototype(handler, window[global].prototype);
<span class="cstat-no" title="statement not covered" >    }</span>
  }<span class="cstat-no" title="statement not covered" ></span>
}
&nbsp;
function _extendListenerPrototype(handler, prototype) {
  if (prototype.hasOwnProperty &amp;&amp; prototype.hasOwnProperty('addEventListener')) {
    var oldAddEventListener = prototype.addEventListen<span class="fstat-no" title="function not covered" >er;</span>
<span class="cstat-no" title="statement not covered" >    if (oldAddEventListener._rollbarOldAdd) {</span>
      oldAddEventListener = ol<span class="cstat-no" title="statement not covered" >dAddEventListener._rollbarO</span>ldAdd;
<span class="cstat-no" title="statement not covered" >    }</span>
    va<span class="cstat-no" title="statement not covered" >r addFn = function(event, callback, bubble) {</span>
      oldAddEventListener.call(this, event, handler.wrap(callback), bubble);
    };<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ></span></span>
    ad<span class="cstat-no" title="statement not covered" >dFn._rollbarOldAdd = oldAddEventListener;</span>
    prototype.addEventListener = addFn;
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >    var oldRemoveEventListener = prototy</span>pe.removeEventListener;
    if (oldRemoveEventListener._rollbarOldRemove) {
      oldRemoveEventListener = ol<span class="cstat-no" title="statement not covered" >dRemoveEventListener._rollbarO</span>ldRemove;
<span class="cstat-no" title="statement not covered" >    }</span>
    va<span class="cstat-no" title="statement not covered" >r removeFn = function(event, callback, bubble) {</span>
      oldRemoveEventListener.call(this, event, callback &amp;&amp; callback._wrapped || callback, bubble);
    };<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ></span></span>
    re<span class="cstat-no" title="statement not covered" >moveFn._rollbarOldRemove = oldRemoveEventListener;</span>
    prototype.removeEventListener = removeFn;
  }<span class="cstat-no" title="statement not covered" ></span>
}<span class="cstat-no" title="statement not covered" ></span>
&nbsp;
module.exports = {
  captureUncaughtExceptions: captureUncaughtExceptions,
  captureUnhandledRejections: captureUnhandledRejections,
  wrapGlobals: wrapGlobals
};
&nbsp;</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Apr 24 2017 16:49:59 GMT-0700 (PDT)</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>

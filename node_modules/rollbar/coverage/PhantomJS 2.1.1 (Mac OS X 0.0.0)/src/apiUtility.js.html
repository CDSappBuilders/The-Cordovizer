<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/apiUtility.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../prettify.css">
    <link rel="stylesheet" href="../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header low">
    <h1>Code coverage report for <span class="entity">src/apiUtility.js</span></h1>
    <h2>
        Statements: <span class="metric">4.65% <small>(2 / 43)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">0% <small>(0 / 34)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">0% <small>(0 / 4)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">4.65% <small>(2 / 43)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">src/</a> &#187; apiUtility.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">var _ = require('./utility');
&nbsp;
function buildPayload(accessToken, data, jsonBackup) {
  if (_.isType(data.context, 'object')) {
    var contextResult = _.stringify(data.context, jso<span class="fstat-no" title="function not covered" >nBackup);</span>
<span class="cstat-no" title="statement not covered" >    if (contextResult.error) {</span>
      data.context = 'Er<span class="cstat-no" title="statement not covered" >ror: could not serialize \'context\'';</span>
<span class="cstat-no" title="statement not covered" >    } else {</span>
<span class="cstat-no" title="statement not covered" >      data.context = contextResult.value || '';</span>
    }
    if<span class="cstat-no" title="statement not covered" > (data.context.length &gt; 255) {</span>
      data.context = data.context.substr(0, 255);
<span class="cstat-no" title="statement not covered" >    }</span>
  }<span class="cstat-no" title="statement not covered" ></span>
  return {
    access_token: accessToken,
<span class="cstat-no" title="statement not covered" >    data: data</span>
  };
}
&nbsp;
function getTransportFromOptions(options, defaults, url) {
  var hostname = defaults.hostname;
  var protocol = defaults.protocol;<span class="fstat-no" title="function not covered" ></span>
  var port = defa<span class="cstat-no" title="statement not covered" >ults.port;</span>
  var path = defa<span class="cstat-no" title="statement not covered" >ults.path;</span>
  var search <span class="cstat-no" title="statement not covered" >= defaults.sea</span>rch;
<span class="cstat-no" title="statement not covered" ></span>
  var proxy = o<span class="cstat-no" title="statement not covered" >ptions.proxy;</span>
  if (options.endpoint) {
    var opts =<span class="cstat-no" title="statement not covered" > url.parse(opt</span>ions.endpoint);
<span class="cstat-no" title="statement not covered" >    hostname = opts.hostname;</span>
    protocol = <span class="cstat-no" title="statement not covered" >opts.protocol;</span>
<span class="cstat-no" title="statement not covered" >    port = opts.port;</span>
<span class="cstat-no" title="statement not covered" >    path = opts.pathname;</span>
<span class="cstat-no" title="statement not covered" >    search = opts.sear</span>ch;
  }<span class="cstat-no" title="statement not covered" ></span>
  re<span class="cstat-no" title="statement not covered" >turn {</span>
    hostname: hostname,
<span class="cstat-no" title="statement not covered" >    protocol: protocol,</span>
    port: port,
    path: path,
    search: search,
    proxy: proxy
  };
}
&nbsp;
function transportOptions(transport, path, method) {
  var protocol = transport.protocol || 'https:';
  var port = transport.port || (protocol === 'http:<span class="fstat-no" title="function not covered" >' ? 80 : protocol === 'https:' ? 443 : undefined);</span>
  var hostname = <span class="cstat-no" title="statement not covered" >transport.hostname;</span>
  var path = <span class="cstat-no" title="statement not covered" >appendPathToPath(transport.path, path);</span>
  if (transport.s<span class="cstat-no" title="statement not covered" >earch) {</span>
    path = pa<span class="cstat-no" title="statement not covered" >th + transport.search;</span>
<span class="cstat-no" title="statement not covered" >  }</span>
  if<span class="cstat-no" title="statement not covered" > (transport.proxy) {</span>
    path = protocol + '//' + hostname + path;
<span class="cstat-no" title="statement not covered" >    hostname = transport.proxy.host || transport.proxy.hostname;</span>
<span class="cstat-no" title="statement not covered" >    port = transport.proxy.port;</span>
<span class="cstat-no" title="statement not covered" >    protocol = transport.proxy.protocol || protocol;</span>
  }<span class="cstat-no" title="statement not covered" ></span>
  re<span class="cstat-no" title="statement not covered" >turn {</span>
    protocol: protocol,
<span class="cstat-no" title="statement not covered" >    hostname: hostname,</span>
    path: path,
    port: port,
    method: method
  };
}
&nbsp;
function appendPathToPath(base, path) {
  var baseTrailingSlash = /\/$/.test(base);
  var pathBeginningSlash = /^\//.test(<span class="fstat-no" title="function not covered" >path);</span>
<span class="cstat-no" title="statement not covered" ></span>
  if (baseTrailingSlash &amp;&amp; <span class="cstat-no" title="statement not covered" >pathBeginningSlas</span>h) {
    path = path.substring(1);
<span class="cstat-no" title="statement not covered" >  } else if (!baseTrailingSlash &amp;&amp; !pathBeginningSlash) {</span>
<span class="cstat-no" title="statement not covered" >    path = '/' + path;</span>
  }<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" ></span>
  return base + path;
}
<span class="cstat-no" title="statement not covered" ></span>
module.exports = {
  buildPayload: buildPayload,
  getTransportFromOptions: getTransportFromOptions,
  transportOptions: transportOptions,
  appendPathToPath: appendPathToPath
};
&nbsp;</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Apr 24 2017 16:49:59 GMT-0700 (PDT)</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
